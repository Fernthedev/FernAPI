buildscript {
    repositories {
        jcenter()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }

    dependencies {
        classpath "com.github.jengelman.gradle.plugins:shadow:4.0.4"
    }
}
plugins {
    id 'java'
    id 'net.nemerosa.versioning' version '2.6.1'
    id 'org.spongepowered.plugin' version '0.9.0'
}

apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'com.github.johnrengelman.shadow'
apply plugin: 'maven-publish'


repositories {
    maven {
        name = 'spigotmc-repo'
        url = 'https://hub.spigotmc.org/nexus/content/groups/public/'
    }

    maven {
        name = 'sonatype'
        url = 'https://oss.sonatype.org/content/groups/public/'
    }
    /*
 As Spigot-API depends on the Bungeecord ChatComponent-API,
we need to add the Sonatype OSS repository, as Gradle,
in comparison to maven, doesn't want to understand the ~/.m2
directory unless added using mavenLocal(). Maven usually just gets
it from there, as most people have run the BuildTools at least once.
This is therefore not needed if you're using the full Spigot/CraftBukkit,
or if you're using the Bukkit API.
*/
    maven { url = 'https://oss.sonatype.org/content/repositories/snapshots' }

    maven {
        name = 'placeholderapi'
        url = 'http://repo.extendedclip.com/content/repositories/placeholderapi/'
    }

    flatDir {
        dirs 'libs'
    }

    jcenter()
    maven { url "https://jitpack.io" }
    mavenCentral()
}

group = 'com.github.fernthedev'

version = '1.6'
def developer = "FernTheDev"
def MCVersion = "1.8.9"
archivesBaseName = "FernAPI"
description = 'An API for universal code'

compileJava.options.encoding = 'UTF-8'

dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    compileOnly 'com.google.code.gson:gson:2.6.2'
    //compileOnly 'org.spigotmc:spigot-api:1.8-R0.1-SNAPSHOT'
    compileOnly 'org.spigotmc:spigot-api:1.8-R0.1-SNAPSHOT' // The Spigot API with no shadowing. Requires the OSS repo.
    compileOnly 'net.md-5:bungeecord-api:1.8-SNAPSHOT'
    implementation group: 'me.clip', name: 'placeholderapi', version: '2.9.2'
    compileOnly 'org.spongepowered:spongeapi:7.1.0'
    compileOnly 'org.projectlombok:lombok:1.18.6'

    compileOnly ('com.github.Fernthedev:VaultAPI:7.0') {
        exclude group: 'org.bukkit'
    }
    

}

sourceCompatibility = targetCompatibility = '1.8' // Need this here so eclipse task generates correctly.
compileJava {
    sourceCompatibility = targetCompatibility = '1.8'
}

configurations.all {
    resolutionStrategy {
        force 'org.spigotmc:spigot-api:1.8-R0.1-SNAPSHOT'
    }
}

// This may not be required, but has solved issues in the past




publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java

            groupId = 'fernthedev'
            artifactId = 'com.github.fernthedev.fernapi'
            version = '1.1'

        }
    }
}

configurations {
    shade
    compile.extendsFrom shade
}

jar.dependsOn(shadowJar)

sponge {
    plugin {
        id = 'fernapi'
        meta {
            url = 'https://github.com/Fernthedev/FernAPI/'
        }
    }
}

shadowJar {
    minimize()
    dependencies {
        include(dependency(':com.github.fernthedev.fernapi'))
    }
}

